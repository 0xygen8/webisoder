<html metal:use-macro="load: base_auth.pt">

<script metal:fill-slot="js" type="text/javascript" src="${request.static_url('webisoder:static/js/profile.js')}"></script>

<div metal:fill-slot="main" class="container">
	<div class="page-header">
		<h1>User profile for ${user.name}</h1>
	</div>

	<div class="row">
		<div class="col-sm-2">
			<div class="panel panel-default">
				<div class="panel-heading"><strong>Personal settings</strong></div>
				<div class="list-group">
					<a class="list-group-item active" href="${request.route_url('profile')}">General settings</a>
					<a class="list-group-item" href="${request.route_url('settings_pw')}">Account settings</a>
					<a class="list-group-item" href="${request.route_url('settings_feed')}">Feed settings</a>
					<a class="list-group-item" href="${request.route_url('settings_token')}">Access token</a>
				</div>
			</div>
		</div>
		<div class="col-sm-10">
			<div class="panel panel-default">
				<div class="panel-heading"><strong>General settings</strong></div>
				<div class="panel-body">
					<form method="post" action="${request.route_url('profile')}">
						<div class="form-group">
							<label for="inputEmail">Email address</label>
							<div tal:omit-tag="'email' not in form_errors" class="input-group has-error">
								<input type="email" name="email" class="form-control" id="inputEmail" placeholder="Email" value="${user.mail}" required />
								<div tal:omit-tag="'email' not in form_errors" class="input-group-addon">${form_errors.get('email')}</div>
							</div>
						</div>
						<div class="form-group">
							<label for="inputNews">Site news</label>
							<div class="checkbox">
								<label>
									<input tal:attributes="checked 'checked' if user.site_news else None" name="site_news" id="inputNews" type="checkbox" /> Receive site news
								</label>
							</div>
						</div>
						<div class="form-group">
							<label for="inputEmail">Your account</label>
							<p class="form-control-static">
								You joined webisoder on ${user.signup.strftime('%B %d %Y')}.
							</p>
						</div>
						<button type="submit" class="btn btn-primary">Update settings</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>

</html>
