<div tal:define="session request.session">
	Logged in as ${session.get('user')}. <a href="/logout">Log out</a>
</div>

<h3>My Shows</h3>

<ul>
	<li tal:repeat="item sorted(subscribed)">
		<form method="post" action="/unsubscribe">
			<input type="hidden" name="show" value="${item.id}" />
			${item.name}
			<input type="submit" value="Unsubscribe" />
		</form>
	</li>
</ul>

<h3>Available Shows</h3>

<ul>
	<li tal:repeat="item sorted(list(set(shows) - set(subscribed)))">
		<form method="post" action="/subscribe">
			<input type="hidden" name="show" value="${item.id}" />
			${item.name}
			<input type="submit" value="Subscribe" />
		</form>
	</li>
</ul>
